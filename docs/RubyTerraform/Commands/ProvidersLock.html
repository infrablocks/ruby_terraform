<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: RubyTerraform::Commands::ProvidersLock
  
    &mdash; Documentation by YARD 0.9.36
  
</title>

  <link rel="stylesheet" href="../../css/style.css" type="text/css" />

  <link rel="stylesheet" href="../../css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "RubyTerraform::Commands::ProvidersLock";
  relpath = '../../';
</script>


  <script type="text/javascript" charset="utf-8" src="../../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../../class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../../_index.html">Index (P)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../../RubyTerraform.html" title="RubyTerraform (module)">RubyTerraform</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../Commands.html" title="RubyTerraform::Commands (module)">Commands</a></span></span>
     &raquo; 
    <span class="title">ProvidersLock</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Class: RubyTerraform::Commands::ProvidersLock
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName"><span class='object_link'><a href="Base.html" title="RubyTerraform::Commands::Base (class)">Base</a></span></span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next"><span class='object_link'><a href="Base.html" title="RubyTerraform::Commands::Base (class)">Base</a></span></li>
          
            <li class="next">RubyTerraform::Commands::ProvidersLock</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  
  
  <dl>
      <dt>Includes:</dt>
      <dd><span class='object_link'><a href="../Options/Global.html" title="RubyTerraform::Options::Global (module)">Options::Global</a></span></dd>
  </dl>
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>lib/ruby_terraform/commands/providers_lock.rb</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>Wraps the <tt>terraform providers lock</tt> command which writes out dependency locks for the configured providers.</p>

<p>Normally the dependency lock file (.terraform.lock.hcl) is updated automatically by “terraform init”, but the information available to the normal provider installer can be constrained when you’re installing providers from filesystem or network mirrors, and so the generated lock file can end up incomplete.</p>

<p>The “providers lock” subcommand addresses that by updating the lock file based on the official packages available in the origin registry, ignoring the currently-configured installation strategy.</p>

<p>After this command succeeds, the lock file will contain suitable checksums to allow installation of the providers needed by the current configuration on all of the selected platforms.</p>

<p>By default this command updates the lock file for every provider declared in the configuration. You can override that behavior by providing one or more provider source addresses on the command line.</p>

<p>For options accepted on construction, see <span class='object_link'><a href="Base.html#initialize-instance_method" title="RubyTerraform::Commands::Base#initialize (method)">Base#initialize</a></span>.</p>

<p>When executing an instance of <span class='object_link'><a href="" title="RubyTerraform::Commands::ProvidersLock (class)">ProvidersLock</a></span> via <span class='object_link'><a href="Base.html#execute-instance_method" title="RubyTerraform::Commands::Base#execute (method)">Base#execute</a></span>, the following options are supported:</p>
<ul><li>
<p><code>:provider</code>: the provider source address for which the lock file should be updated; if both <code>:provider</code> and <code>:providers</code> are provided, all providers will be passed to Terraform.</p>
</li><li>
<p><code>:providers</code>: an array of provider source addresses for which the lock file should be updated; if both <code>:provider</code> and <code>:providers</code> are provided, all providers will be passed to Terraform.</p>
</li><li>
<p><code>:chdir</code>: the path of a working directory to switch to before executing the given subcommand.</p>
</li><li>
<p><code>:fs_mirror</code>: if provided, consults the given filesystem mirror directory instead of the origin registry for each of the given providers; this would be necessary to generate lock file entries for a provider that is available only via a mirror, and not published in an upstream registry; in this case, the set of valid checksums will be limited only to what Terraform can learn from the data in the mirror directory.</p>
</li><li>
<p><code>:net_mirror</code>: if provided, consults the given network mirror (given as a base URL) instead of the origin registry for each of the given providers; this would be necessary to generate lock file entries for a provider that is available only via a mirror, and not published in an upstream registry; in this case, the set of valid checksums will be limited only to what Terraform can learn from the data in the mirror indices.</p>
</li><li>
<p><code>:platform</code>: the target platform to request package checksums for; by default Terraform will request package checksums suitable only for the platform where you run this command; target names consist of an operating system and a CPU architecture; for example, “linux_amd64” selects the Linux operating system running on an AMD64 or x86_64 CPU; each provider is available only for a limited set of target platforms; if both <code>:platform</code> and <code>:platforms</code> are provided, all platforms will be passed to Terraform.</p>
</li><li>
<p><code>:platforms</code>: an array of target platforms to request package checksums for; see <code>:platform</code> for more details; if both <code>:platform</code> and <code>:platforms</code> are provided, all platforms will be passed to Terraform.</p>
</li></ul>

<p>The <span class='object_link'><a href="Base.html#execute-instance_method" title="RubyTerraform::Commands::Base#execute (method)">Base#execute</a></span> method accepts an optional second parameter which is a map of invocation options. Currently, the only supported option is <code>:environment</code> which is a map of environment variables to expose during invocation of the command.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
        <p class="example_title"><div class='inline'>
<p>Basic Invocation</p>
</div></p>
      
      <pre class="example code"><code><span class='const'><span class='object_link'><a href="../../RubyTerraform.html" title="RubyTerraform (module)">RubyTerraform</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Commands.html" title="RubyTerraform::Commands (module)">Commands</a></span></span><span class='op'>::</span><span class='const'>ProvidersLock</span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="Base.html#initialize-instance_method" title="RubyTerraform::Commands::Base#initialize (method)">new</a></span></span><span class='period'>.</span><span class='id identifier rubyid_execute'><span class='object_link'><a href="Base.html#execute-instance_method" title="RubyTerraform::Commands::Base#execute (method)">execute</a></span></span><span class='lparen'>(</span>
  <span class='label'>fs_mirror:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/usr/local/terraform/providers</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
  <span class='label'>platforms:</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>windows_amd64</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>darwin_amd64</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>linux_amd64</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='comma'>,</span>
  <span class='label'>provider:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>tf.example.com/ourcompany/ourplatform</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span></code></pre>
    
  </div>


</div>







  
  
  
  <div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <p class="notice">This class inherits a constructor from <span class='object_link'><a href="Base.html#initialize-instance_method" title="RubyTerraform::Commands::Base#initialize (method)">RubyTerraform::Commands::Base</a></span></p>
  
</div>


</div>

      <div id="footer">
  Generated on Wed Jul 17 17:33:21 2024 by
  <a href="https://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.36 (ruby-3.1.1).
</div>

    </div>
  </body>
</html>